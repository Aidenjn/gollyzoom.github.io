<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Dashboard Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href = "bootstrap-3.3.5-dist/css/bootstrap.min.css"rel="stylesheet">
    
    <script src="Chart.js-master/src/Chart.Core.js"></script>
    <script src="Chart.js-master/src/Chart.Doughnut.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.7/firebase.js"></script>

    <!-- Custom styles for this template -->
    <link href="dashboard.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="bootstrap-3.3.5-dist/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Hkr</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="addHike.html">New Hike</a></li>
            <li><a href="settings.html">Settings</a></li>
            <li><a href="profile.html">Profile</a></li>
            <li><a href="carousel.html">Carousel</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </nav>
    <!--
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Reports</a></li>
            <li><a href="#">Analytics</a></li>
            <li><a href="#">Export</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="">Nav item</a></li>
            <li><a href="">Nav item again</a></li>
            <li><a href="">One more nav</a></li>
            <li><a href="">Another nav item</a></li>
            <li><a href="">More navigation</a></li>
          </ul>
          <ul class="nav nav-sidebar">
            <li><a href="">Nav item again</a></li>
            <li><a href="">One more nav</a></li>
            <li><a href="">Another nav item</a></li>
          </ul>
        </div>
        -->
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h1 class="page-header">Hike Data</h1>

          <div class="row placeholders">
            <div class="col-xs-6 col-sm-3 placeholder">
              <div class="canvas-holder"><canvas id="chart1" width="100" height="100"></canvas></div>
              <h4>Freinds on Hikes</h4>
              <span class="text-muted">Something else</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <div class="canvas-holder"><canvas id="chart2" width="100" height="100"></canvas></div>
              <h4>Hike Locations</h4>
              <span class="text-muted">Something else</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <div class="canvas-holder"><canvas id="chart3" width="100" height="100"></canvas></div>
              <h4>Groups Hiked With</h4>
              <span class="text-muted">Something else</span>
            </div>
            <div class="col-xs-6 col-sm-3 placeholder">
              <div class="canvas-holder"><canvas id="chart4" width="100" height="100"></canvas></div>
              <h4>Length of Hike</h4>
              <span class="text-muted">Something else</span>
            </div>
          </div>
        <button type="button" class="btn btn-primary" onClick="searchHike()">Add</button>
          <h2 class="sub-header">Section title</h2>
          <div class="table-responsive">
            <table class="table table-striped" id="canHikeTable">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Header</th>
                  <th>Header</th>
                  <th>Header</th>
                  <th>Header</th>
                  <th>Header</th> 
                </tr>
              </thead>
              <tbody>
                
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <script>
        
        var doughnutData = [
				{
					value: 28.5,
					label: "Trump"
				},
				{
					value: 18.8,
					label: "Carson"
				},
				{
					value: 7.8,
					label: "Bush",
                    color: "#008A2E"
				},
				{
					value: 7.3,
					label: "Rubio",
                    color: "#46BFBD"
				},
				{
					value: 6.5,
					label: "Cruz",
                    color:"#F7464A"
				}

			];

			window.onload = function()
            {
				var ctx = document.getElementById("chart1").getContext("2d");
				window.myDoughnut = new Chart(ctx).Doughnut(doughnutData, {animationSteps : 90,responsive : true});
                var ctx1 = document.getElementById("chart2").getContext("2d");
				window.myDoughnut2 = new Chart(ctx1).Doughnut(doughnutData, {animationSteps : 95,responsive : true});
                var ctx2 = document.getElementById("chart3").getContext("2d");
				window.myDoughnut3 = new Chart(ctx2).Doughnut(doughnutData, {animationSteps : 100,responsive : true});
                var ctx3 = document.getElementById("chart4").getContext("2d");
				window.myDoughnut4 = new Chart(ctx3).Doughnut(doughnutData, {animationSteps : 105,responsive : true});
			};
        //myDoughnut.resize();
        function searchHike()
        {
            var userId = sessionStorage.getItem("userData");
            var ref = new Firebase("https://testapp31415.firebaseio.com/users/"+userId+"/hikes");
            ref.once("value", function(snapshot) {
              // The callback function will get called twice, once for "fred" and once for "barney"
              snapshot.forEach(function(childSnapshot) {
                // key will be "fred" the first time and "barney" the second time
                var key = childSnapshot.key();
                specificHike(key);
              });
            });
        }
        function specificHike(key)
        {
            var hikeRef = new Firebase("https://testapp31415.firebaseio.com/hikes/"+key);
            hikeRef.on("value", function(snapshot) {
              var hikeNode = (snapshot.val());
            console.log(hikeNode.zip);
            console.log(hikeNode.type);
            $('#canHikeTable tr:last').after('<tr><td id=leader>' + hikeNode.leader + '</td><td id=state>' + hikeNode.state + '</td><td id=zip>' + hikeNode.zip + '</td><td id=trail>' + hikeNode.trail + '</td><td id=type>' + hikeNode.type + '</td><td id= comment>' + hikeNode.comment + '</td><td></tr>');
            }, function (errorObject) {
              console.log("The read failed: " + errorObject.code);
            });
        }
        /*
        function addRow() {
            var i;
            console.log("Attempting to append");
            //$('#canTutorTable tr:last').after('<tr><td>hello</td><td>world</td></tr>');
            var skillsRef = new Firebase("https://brouze.firebaseio.com/users/" + data + "/skills"); //we are looking at the skills of the specific user
            skillsRef.once("value", function(snapshot) {
                // The callback function will get once for each class
                snapshot.forEach(function(childSnapshot) {
                    rowData++;//number of skills
                    // key will be the name of the class they are taking 
                    var key = childSnapshot.key();
                    var betterKey = key.replace(/ /g, "%20")
                    //console.log("there is a better key " + betterKey);
                    // childData will be the actual contents of the child
                    var childData = childSnapshot.val();
                    //var category= childData.category;
                    var price = childData.pay;
                    var teacher = childData.teacher;
                    var yearTaken = childData.year;
                    var comments = childData.comment;
                    var grade = childData.grade;
                    var AP = childData.AP;
                    if(AP == ''){
                       AP = 'NA';
                    }
                    var SAT = childData.SAT;
                    if(SAT == ''){
                       SAT = 'NA';
                    }
                    var ACT = childData.ACT;
                    if(ACT == ''){
                       ACT = 'NA';
                    }
                    $('#canTutorTable tr:last').after('<tr id='+betterKey+'><td id=key>' + key + '</td><td id=teacher>' + teacher + '</td><td id=year>' + yearTaken + '</td><td id=grade>' + grade + '</td><td id=AP>' + AP+"/"+SAT+"/" +ACT+'</td><td id=pay>$' + price + '</td><td id= comment>' + comments + '</td><td></tr>');
                    if (match) {
                       $('#canTutorTable td:last').after('<td id=penButton><a onclick="alertFunc(this)" id="' + key + '"><span class="glyphicon glyphicon-pencil deleteButton" aria-hidden="true"></span></a></td>'); 
                       $('#canTutorTable td:last').after('<td id=trashButton><a onclick="deleteStrength(this)" id="' + key + '"><span class="glyphicon glyphicon-trash deleteButton" aria-hidden="true"></span></a></td>');
                    }
                    /*$("#"+key).click(function(){
                        console.log("key what's up ");
                           // window.document.location = $(this).data("href");
                    });*/
                    /*$("#canTutorTable").on('click', '#'+key, function(){
                            var status = $(this).attr('id');
                            console.log(status);
                            //console.log(miniKey);
                            //console.log(miniKey.ID);
                             //window.location.replace("profile.html?" + "username=" + miniKey + "&pageOwner="+userData);
                    });*/
        
    </script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
